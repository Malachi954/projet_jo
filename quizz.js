const questions = {
    judo: [
        
            {
                question: 'Qui a gagné la médaille d\'or en judo masculin aux Jeux Olympiques de 2021?',
                answers: ['Teddy Riner', 'Hifumi Abe', 'Lasha Shavdatuashvili', 'Varlam Liparteliani'],
                correct: 'Hifumi Abe',
                image: 'images/hifumi_abe.jpeg'
            },
            {
                question: 'Qui a remporté l\'or en judo féminin aux Jeux Olympiques de 2021?',
                answers: ['Daria Bilodid', 'Clarisse Agbegnenou', 'Uta Abe', 'Abe Hifumi'],
                correct: 'Uta Abe',
                image: 'images/uta_abe.jpg'
            },
            {
                question: 'Qui a remporté l\'or en judo masculin aux Jeux Olympiques de 2020?',
                answers: ['Shohei Ono', 'Takanori Nagase', 'Luka Mkheidze', 'Saeid Mollaei'],
                correct: 'Shohei Ono',
                image: 'images/shohei_ono.jpg'
            },
            {
                question: 'Qui a remporté l\'or en judo féminin aux Jeux Olympiques de 2020?',
                answers: ['Amandine Buchard', 'Distria Krasniqi', 'Sarah Asahina', 'Akira Sone'],
                correct: 'Akira Sone',
                image: 'images/akira_sone.jpg'
            },
            {
                question: 'Qui a gagné la médaille d\'or en judo masculin aux Jeux Olympiques de 2016?',
                answers: ['Rafaela Silva', 'Fabio Basile', 'Khasan Khalmurzaev', 'Shuai Jia'],
                correct: 'Fabio Basile',
                image: 'images/fabio_basile.jpg'
            },
            {
                question: 'Qui a remporté l\'or en judo féminin aux Jeux Olympiques de 2016?',
                answers: ['Majlinda Kelmendi', 'Kayla Harrison', 'Yoshihiro Yamashita', 'Paula Pareto'],
                correct: 'Kayla Harrison',
                image: 'images/kayla_harrison.jpg'
            },
            {
                question: 'Qui a gagné la médaille d\'or en judo masculin aux Jeux Olympiques de 2012?',
                answers: ['Arsen Galstyan', 'Tuvshinbayar Naidan', 'Henk Grol', 'Ilias Iliadis'],
                correct: 'Arsen Galstyan',
                image: 'images/arsen_galstyan.jpg'
            },
            {
                question: 'Qui a remporté l\'or en judo féminin aux Jeux Olympiques de 2012?',
                answers: ['Lucie Decosse', 'Kaori Matsumoto', 'Kayla Harrison', 'Majlinda Kelmendi'],
                correct: 'Lucie Decosse',
                image: 'images/lucie_decosse.jpg'
            },
            {
                question: 'Qui a gagné la médaille d\'or en judo masculin aux Jeux Olympiques de 2008?',
                answers: ['Choi Min-ho', 'Masato Uchishiba', 'Ole Bischof', 'Tuvshinbayar Naidan'],
                correct: 'Ole Bischof',
                image: 'images/ole_bischof.jpg'
            },
            {
                question: 'Qui a remporté l\'or en judo féminin aux Jeux Olympiques de 2008?',
                answers: ['Ryoko Tani', 'Ayumi Tanimoto', 'Lucie Decosse', 'Yalennis Castillo'],
                correct: 'Ayumi Tanimoto',
                image: 'images/ayumi_tanimoto.jpg'
            }
        
        
    ],
    taekwondo: [
        {
            question: 'Qui a gagné la médaille d\'or en taekwondo masculin aux Jeux Olympiques de 2021?',
            answers: ['Vito Dell\'Aquila', 'Bradly Sinden', 'Hadi Saei', 'Joel Gonzalez'],
            correct: 'Vito Dell\'Aquila',
            image: 'images/vito_dellaquila.jpg'
        },
        {
            question: 'Qui a remporté l\'or en taekwondo féminin aux Jeux Olympiques de 2021?',
            answers: ['Anastasija Zolotic', 'Jade Jones', 'Tatiana Kudashova', 'Haby Niare'],
            correct: 'Anastasija Zolotic',
            image: 'images/anastasija_zolotic.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en taekwondo masculin aux Jeux Olympiques de 2020?',
            answers: ['Panipak Wongpattanakit', 'Kyo-Don In', 'Lee Dae-Hoon', 'Joel Gonzalez'],
            correct: 'Panipak Wongpattanakit',
            image: 'images/panipak_wongpattanakit.jpg'
        },
        {
            question: 'Qui a remporté l\'or en taekwondo féminin aux Jeux Olympiques de 2020?',
            answers: ['Wu Jingyu', 'Milica Mandic', 'Hwang Kyung-Seon', 'Tatiana Kudashova'],
            correct: 'Milica Mandic',
            image: 'images/milica_mandic.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en taekwondo masculin aux Jeux Olympiques de 2016?',
            answers: ['Ahmad Abughaush', 'Cheick Sallah Cisse', 'Dong-min Cha', 'Steven Lopez'],
            correct: 'Ahmad Abughaush',
            image: 'images/ahmad_abughaush.jpg'
        },
        {
            question: 'Qui a remporté l\'or en taekwondo féminin aux Jeux Olympiques de 2016?',
            answers: ['Kimia Alizadeh', 'Jade Jones', 'Hwang Kyung-Seon', 'Eva Calvo Gomez'],
            correct: 'Jade Jones',
            image: 'images/jade_jones.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en taekwondo masculin aux Jeux Olympiques de 2012?',
            answers: ['Joel Gonzalez', 'Hadi Saei', 'Servet Tazegul', 'Dong-min Cha'],
            correct: 'Joel Gonzalez',
            image: 'images/joel_gonzalez.jpg'
        },
        {
            question: 'Qui a remporté l\'or en taekwondo féminin aux Jeux Olympiques de 2012?',
            answers: ['Wu Jingyu', 'Jade Jones', 'Hwang Kyung-Seon', 'Milica Mandic'],
            correct: 'Jade Jones',
            image: 'images/jade_jones.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en taekwondo masculin aux Jeux Olympiques de 2008?',
            answers: ['Dong-min Cha', 'Hadi Saei', 'Steven Lopez', 'Joel Gonzalez'],
            correct: 'Dong-min Cha',
            image: 'images/dong_min_cha.jpg'
        },
        {
            question: 'Qui a remporté l\'or en taekwondo féminin aux Jeux Olympiques de 2008?',
            answers: ['Wu Jingyu', 'Maria Espinoza', 'Hwang Kyung-Seon', 'Milica Mandic'],
            correct: 'Wu Jingyu',
            image: 'images/wu_jingyu.jpg'
        }

    ],
    boxe: [
        {
            question: 'Quelle athlète a remporté l\'or en boxe féminine en 2021?',
            answers: ['Claressa Shields', 'Kellie Harrington', 'Mira Potkonen', 'Nesthy Petecio'],
            correct: 'Kellie Harrington',
            image: 'images/kellie_harrington.jpg'
        },
        {
            question: 'Qui a remporté l\'or en boxe masculine aux Jeux Olympiques de 2021?',
            answers: ['Andy Cruz', 'Albert Batyrgaziev', 'Roniel Iglesias', 'Arlen Lopez'],
            correct: 'Andy Cruz',
            image: 'images/andy_cruz.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en boxe féminine en 2020?',
            answers: ['Lauren Price', 'Kellie Harrington', 'Busenaz Sürmeneli', 'Beatriz Ferreira'],
            correct: 'Lauren Price',
            image: 'images/lauren_price.jpg'
        },
        {
            question: 'Qui a remporté l\'or en boxe masculine aux Jeux Olympiques de 2020?',
            answers: ['Buse Naz Cakiroglu', 'Arlen Lopez', 'Albert Batyrgaziev', 'Bakhodir Jalolov'],
            correct: 'Bakhodir Jalolov',
            image: 'images/bakhodir_jalolov.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en boxe féminine en 2016?',
            answers: ['Nicola Adams', 'Estelle Mossely', 'Claressa Shields', 'Katie Taylor'],
            correct: 'Claressa Shields',
            image: 'images/claressa_shields.jpg'
        },
        {
            question: 'Qui a remporté l\'or en boxe masculine aux Jeux Olympiques de 2016?',
            answers: ['Artem Harutyunyan', 'Fazliddin Gaibnazarov', 'Tony Yoka', 'Hassan N\'Dam'],
            correct: 'Fazliddin Gaibnazarov',
            image: 'images/fazliddin_gaibnazarov.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en boxe féminine aux Jeux Olympiques de 2012?',
            answers: ['Katie Taylor', 'Adams Nicola', 'Savannah Marshall', 'Claressa Shields'],
            correct: 'Katie Taylor',
            image: 'images/katie_taylor.jpg'
        },
        {
            question: 'Qui a remporté l\'or en boxe masculine aux Jeux Olympiques de 2012?',
            answers: ['Robeisy Ramirez', 'Luke Campbell', 'Zou Shiming', 'Vasyl Lomachenko'],
            correct: 'Luke Campbell',
            image: 'images/luke_campbell.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en boxe féminine aux Jeux Olympiques de 2008?',
            answers: ['Claressa Shields', 'Katie Taylor', 'Nicola Adams', 'Yanina Cedeno'],
            correct: 'Nicola Adams',
            image: 'images/nicola_adams.jpg'
        },
        {
            question: 'Qui a remporté l\'or en boxe masculine aux Jeux Olympiques de 2008?',
            answers: ['Zou Shiming', 'Ruslan Chagaev', 'Shim Hyun-Chul', 'Robeisy Ramirez'],
            correct: 'Zou Shiming',
            image: 'images/zou_shiming.jpg'
        }
    ],
    lutte: [
        {
            question: 'Quelle athlète a remporté l\'or en lutte féminine aux Jeux Olympiques de 2021?',
            answers: ['Helen Maroulis', 'Risako Kawai', 'Adeline Gray', 'Yui Susaki'],
            correct: 'Risako Kawai',
            image: 'images/risako_kawai.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en lutte libre masculine aux Jeux Olympiques de 2021?',
            answers: ['David Taylor', 'Abdulrashid Sadulaev', 'Hassan Yazdani', 'Tamyra Mensah-Stock'],
            correct: 'Abdulrashid Sadulaev',
            image: 'images/abdulrashid_sadulaev.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en lutte féminine aux Jeux Olympiques de 2020?',
            answers: ['Tamyra Mensah-Stock', 'Risako Kawai', 'Ravi Kumar Dahiya', 'Yui Susaki'],
            correct: 'Tamyra Mensah-Stock',
            image: 'images/tamyra_mensah_stock.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en lutte libre masculine aux Jeux Olympiques de 2020?',
            answers: ['Bajrang Punia', 'Abdulrashid Sadulaev', 'Ravi Kumar Dahiya', 'David Taylor'],
            correct: 'Abdulrashid Sadulaev',
            image: 'images/abdulrashid_sadulaev.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en lutte féminine aux Jeux Olympiques de 2016?',
            answers: ['Helen Maroulis', 'Saori Yoshida', 'Eri Tosaka', 'Erica Wiebe'],
            correct: 'Helen Maroulis',
            image: 'images/helen_maroulis.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en lutte libre masculine aux Jeux Olympiques de 2016?',
            answers: ['Soslan Ramonov', 'Jordan Burroughs', 'Hassan Yazdani', 'Artur Aleksanyan'],
            correct: 'Hassan Yazdani',
            image: 'images/hassan_yazdani.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en lutte féminine aux Jeux Olympiques de 2012?',
            answers: ['Kaori Icho', 'Sara Dosho', 'Carolin Nytra', 'Risako Kawai'],
            correct: 'Kaori Icho',
            image: 'images/kaori_icho.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en lutte libre masculine aux Jeux Olympiques de 2012?',
            answers: ['Soslan Tigiev', 'Jordan Burroughs', 'Tatsuhiro Yonemitsu', 'Sharif Sharifov'],
            correct: 'Jordan Burroughs',
            image: 'images/jordan_burroughs.jpg'
        },
        {
            question: 'Quelle athlète a remporté l\'or en lutte féminine aux Jeux Olympiques de 2008?',
            answers: ['Sara Dosho', 'Kaori Icho', 'Wang Jiao', 'Alena Kartashova'],
            correct: 'Wang Jiao',
            image: 'images/wang_jiao.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en lutte libre masculine aux Jeux Olympiques de 2008?',
            answers: ['Soslan Tigiev', 'Buvaysa Saytiev', 'Ramazan Sahin', 'George Gogshelidze'],
            correct: 'Ramazan Sahin',
            image: 'images/ramazan_sahin.jpg'
        }
    ],
    karaté: [
        {
            question: 'Qui a remporté la médaille d\'or en kata masculin aux Jeux Olympiques de 2021?',
            answers: ['Sandra Sanchez', 'Damián Quintero', 'Kiyou Shimizu', 'Ryo Kiyuna'],
            correct: 'Ryo Kiyuna',
            image: 'images/ryo_kiyuna.jpg'
        },
        {
            question: 'Qui a gagné la médaille d\'or en kata féminin aux Jeux Olympiques de 2021?',
            answers: ['Sandra Sanchez', 'Kiyou Shimizu', 'Viviana Bottaro', 'Ariel Torres'],
            correct: 'Sandra Sanchez',
            image: 'images/sandra_sanchez.jpg'
        },
        {
            question: 'Qui a remporté l\'or en kumite masculin aux Jeux Olympiques de 2020?',
            answers: ['Steven Da Costa', 'Ryo Kiyuna', 'Luigi Busà', 'Abdallah Elsawy'],
            correct: 'Steven Da Costa',
            image: 'images/steven_da_costa.jpg'
        },
        {
            question: 'Qui a gagné l\'or en kumite féminin aux Jeux Olympiques de 2020?',
            answers: ['Miryam Roper', 'Merve Coban', 'Anzhelika Terliuga', 'Ivet Goranova'],
            correct: 'Anzhelika Terliuga',
            image: 'images/anzhelika_terliuga.jpg'
        },
        {
            question: 'Qui a remporté l\'or en kata masculin aux Jeux Olympiques de 2020?',
            answers: ['Ryo Kiyuna', 'Ali Sofuoglu', 'Viviana Bottaro', 'Damian Quintero'],
            correct: 'Damian Quintero',
            image: 'images/damian_quintero.jpg'
        },
        {
            question: 'Qui a gagné l\'or en kata féminin aux Jeux Olympiques de 2020?',
            answers: ['Sandra Sanchez', 'Viviana Bottaro', 'Ariel Torres', 'Kiyou Shimizu'],
            correct: 'Kiyou Shimizu',
            image: 'images/kiyou_shimizu.jpg'
        },
        {
            question: 'Qui a remporté l\'or en kumite masculin aux Jeux Olympiques de 2016?',
            answers: ['Rafael Aghayev', 'Luigi Busà', 'Ryutaro Araga', 'Sajjad Ganjzadeh'],
            correct: 'Rafael Aghayev',
            image: 'images/rafael_aghayev.jpg'
        },
        {
            question: 'Qui a gagné l\'or en kumite féminin aux Jeux Olympiques de 2016?',
            answers: ['Ayumi Uekusa', 'Merve Coban', 'Anzhelika Terliuga', 'Serap Özçelik'],
            correct: 'Serap Özçelik',
            image: 'images/serap_ozcelik.jpg'
        },
        {
            question: 'Qui a remporté l\'or en kata masculin aux Jeux Olympiques de 2016?',
            answers: ['Antonio Diaz', 'Damian Quintero', 'Luigi Busà', 'Ali Sofuoglu'],
            correct: 'Antonio Diaz',
            image: 'images/antonio_diaz.jpg'
        },
        {
            question: 'Qui a gagné l\'or en kata féminin aux Jeux Olympiques de 2016?',
            answers: ['Sandra Sanchez', 'Viviana Bottaro', 'Kiyou Shimizu', 'Grace Lau'],
            correct: 'Kiyou Shimizu',
            image: 'images/kiyou_shimizu.jpg'
        }
            
    ]
};

let currentQuestionIndex = 0;
let score = 0;
let timeLeft = 50;
let timerInterval;
let selectedDiscipline = '';

const welcomeContainer = document.getElementById('welcome-container');
const loadingBarFill = document.getElementById('loading-bar-fill');
const disciplineContainer = document.getElementById('discipline-container');
const quizContainer = document.getElementById('quiz-container');
const questionContainer = document.getElementById('question-container');
const resultContainer = document.getElementById('result-container');
const questionElement = document.getElementById('question');
const answerButtons = document.getElementById('answer-buttons');
const scoreElement = document.getElementById('score');
const restartBtn = document.getElementById('restart-btn');
const backBtn = document.getElementById('back-btn');
const timeElement = document.getElementById('time');
const athleteImage = document.getElementById('athlete-image');

document.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
        fillLoadingBar();
    }
});

function fillLoadingBar() {
    let width = parseInt(loadingBarFill.style.width);
    if (isNaN(width)) width = 0;
    width += 10;
    loadingBarFill.style.width = width + '%';
    if (width >= 100) {
        showDisciplineSelection();
    }
}

function showDisciplineSelection() {
    welcomeContainer.classList.add('hide');
    disciplineContainer.classList.remove('hide');
}

function selectDiscipline(discipline) {
    selectedDiscipline = discipline;
    disciplineContainer.classList.add('hide');
    quizContainer.classList.remove('hide');
    startGame();
}

function startGame() {
    currentQuestionIndex = 0;
    score = 0;
    timeLeft = 50;
    resultContainer.classList.add('hide');
    questionContainer.classList.remove('hide');
    setNextQuestion();
    startTimer();
}

function startTimer() {
    timerInterval = setInterval(() => {
        timeLeft--;
        timeElement.textContent = timeLeft;
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            showResults();
        }
    }, 1000);
}

function setNextQuestion() {
    resetState();
    showQuestion(questions[selectedDiscipline][currentQuestionIndex]);
}

function showQuestion(question) {
    questionElement.textContent = question.question;
    athleteImage.src = question.image;
    question.answers.forEach(answer => {
        const button = document.createElement('button');
        button.textContent = answer;
        button.classList.add('btn');
        if (answer === question.correct) {
            button.dataset.correct = true;
        }
        button.addEventListener('click', selectAnswer);
        answerButtons.appendChild(button);
    });
}

function resetState() {
    while (answerButtons.firstChild) {
        answerButtons.removeChild(answerButtons.firstChild);
    }
}

function selectAnswer(e) {
    const selectedButton = e.target;
    const correct = selectedButton.dataset.correct === 'true';
    if (correct) {
        score++;
    }
    currentQuestionIndex++;
    if (currentQuestionIndex < questions[selectedDiscipline].length) {
        setNextQuestion();
    } else {
        clearInterval(timerInterval);
        showResults();
    }
}

function showResults() {
    questionContainer.classList.add('hide');
    resultContainer.classList.remove('hide');
    scoreElement.textContent = `Votre score: ${score}/${questions[selectedDiscipline].length}`;
}

function goBack() {
    quizContainer.classList.add('hide');
    disciplineContainer.classList.remove('hide');
    clearInterval(timerInterval);
}

restartBtn.addEventListener('click', startGame);
backBtn.addEventListener('click', goBack);
